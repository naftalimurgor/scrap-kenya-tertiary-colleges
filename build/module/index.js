import * as cheerio from 'cheerio';
import axios from 'axios';
// @ts-ignore
async function fetchCollegeContact(collegesURL, outputXLXSFilePath, pageCount) {
    // @ts-ignore
    let url = pageCount === 1 ? collegesURL : `${collegesURL}?page=${pageCount}`;
    let collegeContact = [];
    try {
        const collegesInfoHTML = await axios.get(url);
        const $ = cheerio.load(collegesInfoHTML.data);
        const $table = $('.table').children('tbody').children('tr');
        const baseURL = 'https://studyinkenya.co.ke';
        // console.log($table)
        $table.each((_index, $el) => {
            const td = $($el).children('td').text();
            const emaiLink = $($el).children('td').children('a').attr();
            const link = {
                href: `${baseURL}${emaiLink?.href}`,
                name: `${emaiLink?.href.slice(0, emaiLink?.href.indexOf(''))}`,
                college: `${td}` // phone
            };
            collegeContact.push(link);
            console.log(link);
        });
        return collegeContact;
    }
    catch (error) {
        console.log(error);
    }
}
const main = async () => {
    const KENYAN_TERTIARY_COLLEGES_URL = 'https://studyinkenya.co.ke/telephone-contacts-of-universities-and-colleges-in-kenya';
    let totalPagecount = 9;
    let currentPage = 1;
    let links = [];
    try {
        do {
            links = await fetchCollegeContact(KENYAN_TERTIARY_COLLEGES_URL, '', currentPage);
            totalPagecount--;
            currentPage++;
            console.log(currentPage);
        } while (totalPagecount !== 0);
        console.log(links);
    }
    catch (error) {
    }
    console.log(links);
};
main()
    .catch(err => console.log(err));
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxLQUFLLE9BQU8sTUFBTSxTQUFTLENBQUE7QUFDbEMsT0FBTyxLQUFLLE1BQU0sT0FBTyxDQUFBO0FBVXpCLGFBQWE7QUFDYixLQUFLLFVBQVUsbUJBQW1CLENBQUMsV0FBbUIsRUFBRSxrQkFBMEIsRUFBRSxTQUFpQjtJQUNqRyxhQUFhO0lBQ2IsSUFBSSxHQUFHLEdBQVcsU0FBUyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLFdBQVcsU0FBUyxTQUFTLEVBQUUsQ0FBQTtJQUNwRixJQUFJLGNBQWMsR0FBMEIsRUFBRSxDQUFBO0lBQzlDLElBQUk7UUFDQSxNQUFNLGdCQUFnQixHQUFHLE1BQU0sS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQTtRQUM3QyxNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFBO1FBQzdDLE1BQU0sTUFBTSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFBO1FBQzNELE1BQU0sT0FBTyxHQUFHLDRCQUE0QixDQUFBO1FBRTVDLHNCQUFzQjtRQUN0QixNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBYyxFQUFFLEdBQW9CLEVBQUUsRUFBRTtZQUNqRCxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBO1lBQ3ZDLE1BQU0sUUFBUSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFBO1lBQzNELE1BQU0sSUFBSSxHQUFHO2dCQUNULElBQUksRUFBRSxHQUFHLE9BQU8sR0FBRyxRQUFRLEVBQUUsSUFBSSxFQUFFO2dCQUNuQyxJQUFJLEVBQUUsR0FBRyxRQUFRLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRTtnQkFDOUQsT0FBTyxFQUFFLEdBQUcsRUFBRSxFQUFFLENBQUMsUUFBUTthQUU1QixDQUFDO1lBRUYsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUN6QixPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFBO1FBRXJCLENBQUMsQ0FBQyxDQUFBO1FBQ0YsT0FBTyxjQUFjLENBQUE7S0FDeEI7SUFBQyxPQUFPLEtBQUssRUFBRTtRQUNaLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUE7S0FDckI7QUFDTCxDQUFDO0FBQ0QsTUFBTSxJQUFJLEdBQUcsS0FBSyxJQUFtQixFQUFFO0lBQ25DLE1BQU0sNEJBQTRCLEdBQUcscUZBQXFGLENBQUE7SUFDMUgsSUFBSSxjQUFjLEdBQUcsQ0FBQyxDQUFBO0lBQ3RCLElBQUksV0FBVyxHQUFHLENBQUMsQ0FBQTtJQUNuQixJQUFJLEtBQUssR0FBMEIsRUFBRSxDQUFBO0lBRXJDLElBQUk7UUFFQSxHQUFHO1lBQ0MsS0FBSyxHQUFHLE1BQU0sbUJBQW1CLENBQUMsNEJBQTRCLEVBQUUsRUFBRSxFQUFFLFdBQVcsQ0FBMEIsQ0FBQTtZQUV6RyxjQUFjLEVBQUUsQ0FBQTtZQUNoQixXQUFXLEVBQUUsQ0FBQTtZQUNiLE9BQU8sQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUE7U0FDM0IsUUFBUSxjQUFjLEtBQUssQ0FBQyxFQUFFO1FBSS9CLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUE7S0FDckI7SUFBQyxPQUFPLEtBQUssRUFBRTtLQUVmO0lBQ0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQTtBQUN0QixDQUFDLENBQUE7QUFFRCxJQUFJLEVBQUU7S0FDRCxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUEifQ==